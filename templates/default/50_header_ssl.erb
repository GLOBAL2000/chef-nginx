<% if @name == "default" -%>
  listen       443 default_server
<% else -%>
  listen       <%= @name -%>:443;
<% end -%>
  <% if !@server_aliases.nil? -%>
  server_name  <%= Array( @server_aliases ).join(" ") -%>;
  <% end -%>

  access_log  /var/log/nginx/<%= @server_name -%>.ssl.access.log combined;
  error_log  /var/log/nginx/<%= @server_name -%>.ssl.error.log;

  ssl  on;
  ssl_certificate <%= @ssl_cert -%>;
  ssl_certificate_key  <%= @ssl_cert_key -%>;

  # Custom config coming here (sorry, nice intendation gets lost here)
  <%= @config_options -%>
